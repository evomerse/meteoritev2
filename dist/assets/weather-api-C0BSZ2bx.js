const a="https://nominatim.openstreetmap.org/search",c="https://api.open-meteo.com/v1/forecast";async function d(r){try{const o=await fetch(`${a}?q=${encodeURIComponent(r)}&format=json&limit=1`);if(!o.ok)throw new Error("Erreur de géocodage");const e=await o.json();if(!e||e.length===0)throw new Error("Ville introuvable");return{name:e[0].display_name.split(",")[0],latitude:parseFloat(e[0].lat),longitude:parseFloat(e[0].lon)}}catch(o){throw o}}async function l(){return new Promise((r,o)=>{if(!navigator.geolocation){o(new Error("La géolocalisation n'est pas supportée"));return}navigator.geolocation.getCurrentPosition(e=>{r({latitude:e.coords.latitude,longitude:e.coords.longitude})},e=>{o(new Error("Erreur de géolocalisation"))})})}async function p(r,o){try{const e=`${c}?latitude=${r}&longitude=${o}&current_weather=true&hourly=temperature_2m,precipitation,wind_speed_10m,weather_code&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,weather_code&timezone=auto`,t=await fetch(e);if(!t.ok)throw new Error("Erreur de récupération des données météo");return await t.json()}catch(e){throw e}}function u(r){return{0:{description:"Ciel dégagé",icon:"☀️"},1:{description:"Principalement dégagé",icon:"🌤"},2:{description:"Partiellement nuageux",icon:"⛅"},3:{description:"Couvert",icon:"☁️"},45:{description:"Brouillard",icon:"🌫"},48:{description:"Brouillard givrant",icon:"🌫"},51:{description:"Bruine légère",icon:"🌦"},53:{description:"Bruine modérée",icon:"🌦"},55:{description:"Bruine dense",icon:"🌦"},61:{description:"Pluie légère",icon:"🌧"},63:{description:"Pluie modérée",icon:"🌧"},65:{description:"Pluie forte",icon:"🌧"},71:{description:"Chute de neige légère",icon:"🌨"},73:{description:"Chute de neige modérée",icon:"🌨"},75:{description:"Chute de neige forte",icon:"🌨"},77:{description:"Grains de neige",icon:"🌨"},80:{description:"Averses légères",icon:"🌦"},81:{description:"Averses modérées",icon:"🌦"},82:{description:"Averses violentes",icon:"⛈"},85:{description:"Averses de neige légères",icon:"🌨"},86:{description:"Averses de neige fortes",icon:"🌨"},95:{description:"Orage",icon:"⛈"},96:{description:"Orage avec grêle légère",icon:"⛈"},99:{description:"Orage avec grêle forte",icon:"⛈"}}[r]||{description:"Inconnu",icon:"?"}}async function g(r,o){var e,t,i;try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${r}&lon=${o}&format=json`);if(!n.ok)return"Position actuelle";const s=await n.json();return((e=s.address)==null?void 0:e.city)||((t=s.address)==null?void 0:t.town)||((i=s.address)==null?void 0:i.village)||"Position actuelle"}catch{return"Position actuelle"}}export{p as a,g as b,d as c,u as d,l as g};
